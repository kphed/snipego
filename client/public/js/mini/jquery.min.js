function domloaded(){(function(){var e,t,r,n,a,i,o,s,c,l,u,d;r=350,e=[[85,71,106],[174,61,99],[219,56,83],[244,92,68],[248,182,70]],n=2*Math.PI,a=document.getElementById("world"),o=a.getContext("2d"),window.w=0,window.h=0,u=function(){return window.w=a.width=window.innerWidth,window.h=a.height=window.innerHeight},window.addEventListener("resize",u,!1),window.onload=function(){return setTimeout(u,0)},l=function(e,t){return(t-e)*Math.random()+e},s=function(e,t,r,a){return o.beginPath(),o.arc(e,t,r,0,n,!1),o.fillStyle=a,o.fill()},d=.5,document.onmousemove=function(e){return d=e.pageX/w},window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),t=function(){function t(){this.style=e[~~l(0,5)],this.rgb="rgba("+this.style[0]+","+this.style[1]+","+this.style[2],this.r=~~l(2,6),this.r2=2*this.r,this.replace()}return t.prototype.replace=function(){return this.opacity=0,this.dop=.03*l(1,4),this.x=l(-this.r2,w-this.r2),this.y=l(-20,h-this.r2),this.xmax=w-this.r,this.ymax=h-this.r,this.vx=l(0,2)+8*d-5,this.vy=.7*this.r+l(-1,1)},t.prototype.draw=function(){var e;return this.x+=this.vx,this.y+=this.vy,this.opacity+=this.dop,this.opacity>1&&(this.opacity=1,this.dop*=-1),(this.opacity<0||this.y>this.ymax)&&this.replace(),0<(e=this.x)&&e<this.xmax||(this.x=(this.x+this.xmax)%this.xmax),s(~~this.x,~~this.y,this.r,this.rgb+","+this.opacity+")")},t}(),i=function(){var e,n,a;for(a=[],c=e=1,n=r;n>=1?n>=e:e>=n;c=n>=1?++e:--e)a.push(new t);return a}(),window.step=function(){var e,t,r,n;for(requestAnimationFrame(step),o.clearRect(0,0,w,h),n=[],t=0,r=i.length;r>t;t++)e=i[t],n.push(e.draw());return n},step()}).call(this)}document.addEventListener("DOMContentLoaded",domloaded,!1),angular.module("SnipeGo",["SnipeGo.Directives.Popover","SnipeGo.Directives.ToggleClass","SnipeGo.MainCtrl","SnipeGo.NavCtrl","SnipeGo.DepositCtrl","SnipeGo.Services","ui.router","firebase","angular-svg-round-progress"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("main",{url:"/",views:{"":{templateUrl:"js/template/main.html",controller:"MainCtrl"},nav:{templateUrl:"js/template/nav.html",controller:"NavCtrl"}}})}]),angular.module("SnipeGo.DepositCtrl",["SnipeGo","SnipeGo.Services"]).controller("DepositCtrl",["$scope","$http","$rootScope","$window","$firebaseObject","$timeout",function(e,t,r,n,a,i){var o;e.users={};var s=function(){return{tradeUrl:r.user.tradeUrl,displayName:r.user.displayName,avatar:r.user.photos[1],id:r.user.id,items:e.selectedItems,itemsValue:e.totalValue(),itemsCount:r.itemsSelected}};e.inventoryLoading=!1,e.loadingTrade=!1,e.items=[],e.selectedItems={},e.tradeID="",e.protectionCode="",e.errorDetected=!1,e.setUser=function(){o=new Firebase("https://snipego.firebaseio.com/users/"+r.user.id),e.users=a(o),e.users.$watch(function(){e.users.$loaded().then(function(){void 0!==e.users.tradeID&&void 0!==e.users.protectionCode&&(e.loadingTrade=!1,e.tradeID=e.users.tradeID,e.protectionCode=e.users.protectionCode)})})},e.selectedQuantity=function(){return r.itemsSelected=Object.keys(e.selectedItems).length," "+r.itemsSelected+" Skins"},e.totalValue=function(){var t=0;for(var r in e.selectedItems)t+=parseFloat(e.selectedItems[r].market_price);return Math.round(100*t)/100},e.selectItem=function(t){e.selectedItems[t.assetid]?delete e.selectedItems[t.assetid]:10===r.itemsSelected?n.alert("You can't add more than 10 items"):e.selectedItems[t.assetid]=t},e.depositItems=function(){if(e.totalValue()<5)n.alert("You need at least $5 skins value to play, select more skins");else{if(e.setUser(),0===r.itemsSelected)return void n.alert("Please select at least one skin to deposit");e.loadingTrade=!0,t.post("/deposit/",s()).success(function(t){e.selectedItems={},e.items=[]}).error(function(){e.errorDetected=!0,e.loadingTrade=!1,e.selectedItems={},e.items=[],i(function(){e.errorDetected=!1},5e3)})}},e.sortItems=function(t){e.items=t.sort(function(e,t){return t.market_price-e.market_price}),e.inventoryLoading=!1},e.fetchInventory=function(){e.items=[],e.inventoryLoading?n.alert("Your inventory is already loading, please be patient"):(e.inventoryLoading=!0,t.post("/users/update-inventory",{steamid:r.user.id}).success(function(t){e.sortItems(t)}))}}]),angular.module("SnipeGo.MainCtrl",["SnipeGo"]).controller("MainCtrl",["$scope","$firebaseArray","$firebaseObject","$rootScope","$window","$http","$sce","$timeout",function(e,t,r,n,a,i,o,s){var c=new Firebase("https://snipego.firebaseio.com/currentJackpot"),l=new Firebase("https://snipego.firebaseio.com/endedJackpots");e.currentJackpot=r(c),e.endedJackpots=t(l),e.ended=[],e.twitchPlayer='<object bgcolor="#000000"data="//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf"height="250px"type="application/x-shockwave-flash"width="100%"><param name="allowFullScreen"value="true" /><param name="allowNetworking"value="all" /><param name="allowScriptAccess"value="always" /><param name="movie"value="//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf" /><param name="flashvars"value="channel=joshog&auto_play=true&start_volume=50" /></object><iframe frameborder="0" scrolling="no" id="chat_embed" src="http://www.twitch.tv/joshog/chat" height="325" width="100%"></iframe>',e.getTwitch=function(){var t="https://api.twitch.tv/kraken/streams?game=Counter-Strike%3A%20Global%20Offensive&limit=1&callback=JSON_CALLBACK";i.defaults.headers.common["X-Custom-Header"]="Angular.js",i.jsonp(t).success(function(t){var r=t.streams[0].channel.display_name;r=r.replace(/['"]+/g,""),console.log("Channel Name is ",r),s(function(){e.twitchPlayer='<object bgcolor="#000000"data="//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf"height="250px"type="application/x-shockwave-flash"width="100%"><param name="allowFullScreen"value="true" /><param name="allowNetworking"value="all" /><param name="allowScriptAccess"value="always" /><param name="movie"value="//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf" /><param name="flashvars"value="channel='+r+'&auto_play=true&start_volume=50" /></object><iframe frameborder="0" scrolling="no" id="chat_embed" src="http://www.twitch.tv/'+r.toLowerCase()+'/chat" height="325" width="100%"></iframe>'})})},e.getTwitch(),e.getHtml=function(e){return o.trustAsHtml(e)},e.currentJackpot.$watch(function(){e.currentJackpot.$loaded().then(function(){var t=[];for(var r in e.currentJackpot.players)e.currentJackpot.players[r].chance=(e.currentJackpot.players[r].itemsValue/e.currentJackpot.jackpotValue*100).toFixed(2),t.push(e.currentJackpot.players[r]);e.currentJackpot.jackpotValue=e.currentJackpot.jackpotValue.toFixed(2)})}),e.endedJackpots.$watch(function(){e.endedJackpots.$loaded().then(function(){e.ended=e.endedJackpots.slice(-3).reverse();for(var t=0;t<e.ended.length;t++){e.ended[t].winningNumber=(100*parseFloat(e.ended[t].rngStr)).toFixed(2)+"%";for(var r=0;r<e.ended[t].players.length;r++)e.ended[t].players[r].chance=(e.ended[t].players[r].itemsValue/e.ended[t].jackpotValue*100).toFixed(2)}})}),e.getStyle=function(){var e="translateY(-50%) translateX(-50%)";return{top:"35%",bottom:"auto",left:"50%",transform:e,"-moz-transform":e,"-webkit-transform":e,"font-size":"65px"}}}]),angular.module("SnipeGo.NavCtrl",["SnipeGo","SnipeGo.Services"]).controller("NavCtrl",["$scope","$rootScope","Auth","$http",function(e,t,r,n){e.successDanger="danger",e.isAuth=!1,e.tradeUrlSuccess=!1,e.profilePic="",e.tradeUrl="Add trade URL to unlock jackpot deposits",e.playDestination="#tradeurl",e.updateTradeUrl=function(){e.tradeUrl.match(/partner/i)&&e.tradeUrl.match(/token/i)?n.post("/users/update-trade-url",{tradeUrl:e.tradeUrl}).success(function(t){e.successDanger="success",e.playDestination="#deposit",e.tradeUrlSuccess=!0}):e.tradeUrl="Invalid trade Url, please try again"},e.clearPlaceholder=function(){e.tradeUrl=""},e.checkAuth=function(){r.checkSession().success(function(r){r&&(e.profilePic=r.photos[1],e.isAuth=!0,t.user=r,r.tradeUrl&&(e.successDanger="success",e.playDestination="#deposit"))})},e.checkAuth()}]),angular.module("SnipeGo.Directives.Popover",["SnipeGo"]).directive("popover",function(){return function(e,t,r){t.find("[rel=popover]").popover({placement:"bottom",html:"true"})}}),angular.module("SnipeGo.Directives.ToggleClass",["SnipeGo"]).directive("toggleClass",["$rootScope",function(e){return{restrict:"A",link:function(t,r,n){$(r).click(function(){e.itemsSelected<10?$(r).toggleClass("highlightSelected"):$(r).removeClass("highlightSelected")})}}}]),angular.module("SnipeGo.Services",["SnipeGo"]).factory("Auth",["$http",function(e){var t=function(){return e.get("/auth/is-authenticated")};return{checkSession:t}}]);